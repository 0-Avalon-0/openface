<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Demo 1 - Real-time Web - OpenFace</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">OpenFace</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Demos <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">Demo 1 - Real-time Web</a>
</li>

                        
                            
<li >
    <a href="../demo-2-comparison/">Demo 2 - Comparison</a>
</li>

                        
                            
<li >
    <a href="../demo-3-classifier/">Demo 3 - Training a Classifier</a>
</li>

                        
                            
<li >
    <a href="../demo-4-sphere/">Demo 4 - Real-time Sphere Visualization</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../usage/">Usage and API Docs</a>
</li>

                        
                            
<li >
    <a href="../setup/">Setup</a>
</li>

                        
                            
<li >
    <a href="../faq/">FAQ</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">DNN Models <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../models-and-accuracies/">Models and Accuracies</a>
</li>

                        
                            
<li >
    <a href="../training-new-models/">Training a DNN Model</a>
</li>

                        
                            
<li >
    <a href="../visualizations/">Visualizations</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../release-notes/">Release Notes</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../demo-2-comparison/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/cmusatyalab/openface">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#demo-1-real-time-web-demo">Demo 1: Real-Time Web Demo</a></li>
        
    
        <li class="main "><a href="#setup-and-running">Setup and Running</a></li>
        
            <li><a href="#warning-when-running-remotely">Warning when running remotely</a></li>
        
            <li><a href="#with-docker">With Docker</a></li>
        
            <li><a href="#manual-setup">Manual Setup</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="demo-1-real-time-web-demo">Demo 1: Real-Time Web Demo</h2>
<p>Released by <a href="http://bamos.github.io">Brandon Amos</a> on 2015-10-13.</p>
<hr />
<p>See <a href="https://www.youtube.com/watch?v=LZJOTRkjZA4">our YouTube video</a>
of using this in a real-time web application
for face recognition.
The source is available in
<a href="https://github.com/cmusatyalab/openface/blob/master/demos/web">demos/web</a>.
The browser portions have been tested on Google Chrome 46 in OSX.</p>
<p><a href='https://www.youtube.com/watch?v=LZJOTRkjZA4'><img src='https://raw.githubusercontent.com/cmusatyalab/openface/master/images/youtube-web.gif'></img></a></p>
<p>This demo does the full face recognition pipeline on every frame.
In practice, object tracking
<a href="http://blog.dlib.net/2015/02/dlib-1813-released.html">like dlib's</a>
should be used once the face recognizer has predicted a face.</p>
<p>In the edge case when a single person is trained,
the classifier has no knowledge of other people and
labels anybody with the name of the trained person.</p>
<p>The web demo does not predict unknown users and the saved
faces are only available for the browser session.
If you're interested in predicting unknown people,
one idea is to use a probabilistic classifier to predict
confidence scores and then call the prediction unknown
if the confidence is too low.
See the <a href="http://cmusatyalab.github.io/openface/demo-3-classifier/">classification demo</a>
for an example of using a probabilistic classifier.</p>
<p>See <a href="https://github.com/cowbjt/openface/tree/demo-web-stand-alone">cowbjt's unofficial fork</a>
for a version of the demo that saves trained faces in a SQLite
database.</p>
<hr />
<h2 id="setup-and-running">Setup and Running</h2>
<p>To run on your system, first follow the
<a href="../setup/">Setup Guide</a> and make sure you can
run a simpler demo, like the <a href="../demo-2-comparison/">comparison demo</a>.</p>
<p>If you experience issues with the web demo,
please post to
<a href="https://groups.google.com/forum/#!forum/cmu-openface">our mailing list</a>
and include the the WebSocket log contents from
<code>/tmp/openface.websocket.log</code> if available.</p>
<h3 id="warning-when-running-remotely">Warning when running remotely</h3>
<p>Trying to connect to a remote or Docker version of OpenFace in
the latest version of Chrome will result in the following error:</p>
<blockquote>
<p>getUserMedia() no longer works on insecure origins. To use this
feature, you should consider switching your application to a secure
origin, such as HTTPS. See https://goo.gl/rStTGz for more details.</p>
</blockquote>
<p>They suggest three workarounds:</p>
<ol>
<li>
<p>localhost is treated as a secure origin over HTTP, so if you're
    able to run your server from localhost, you should be able to test
    the feature on that server.</p>
</li>
<li>
<p>You can run chrome with the
    --unsafely-treat-insecure-origin-as-secure="example.com" flag
    (replacing "example.com" with the origin you actually want to test),
    which will treat that origin as secure for this session. Note that
    you also need to include the --user-data-dir=/test/only/profile/dir
    to create a fresh testing profile for the flag to work.</p>
</li>
<li>
<p>Use secure protocols</p>
</li>
</ol>
<hr />
<p>#2 is requires starting Chrome with a non-standard flag.</p>
<p>If you don't want to start Chrome with a non-standard flag,
the following commands use <a href="https://nmap.org/ncat/">ncat</a> to
route all OpenFace traffic through localhost to a remote server or
Docker container so that the demo can be accessed in Chrome
at <code>http://localhost:8000</code>.
Replace <code>SERVER_IP</code> with the IP address of your server.</p>
<pre><code>export SERVER_IP=192.168.99.100
ncat --sh-exec &quot;ncat $SERVER_IP 8000&quot; -l 8000 --keep-open &amp;
ncat --sh-exec &quot;ncat $SERVER_IP 9000&quot; -l 9000 --keep-open &amp;
</code></pre>

<p>We are also interested in help running this demo with secure protocols
in <a href="https://github.com/cmusatyalab/openface/issues/75">Issue #75</a>
so the demo works on a remote server or Docker without these workarounds.</p>
<h3 id="with-docker">With Docker</h3>
<p>Start the HTTP and WebSocket servers on ports 8000 and 9000 in the
Docker container with:</p>
<pre><code>docker run -p 9000:9000 -p 8000:8000 -t -i bamos/openface /bin/bash -l -c '/root/openface/demos/web/start-servers.sh'
</code></pre>

<p>Then find the IP address of the container and access the demo
in your browser at <code>http://docker-ip:8000</code>.</p>
<h3 id="manual-setup">Manual Setup</h3>
<p>After following the OpenFace setup guide and successfully running the
comparison demo, install the requirements for the web demo with
<code>sudo pip install -r requirements.txt</code>
from the <code>demos/web</code> directory.</p>
<p>Start the HTTP and WebSocket servers on ports 8000 and 9000, respectively,
with <code>./demos/web/start-servers.sh</code>.
If you wish to use other ports,
pass them as <code>./demos/web/start-servers.sh HTTP_PORT WEBSOCKET_PORT</code>.</p>
<p>You should now also be able to access the demo from your browser
at <code>http://localhost:8000</code> if running locally or
<code>http://your-server:8000</code> if running on a server.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
                <p>Crafted by <a href="http://bamos.github.io">Brandon Amos</a> at Carnegie Mellon University.</p>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>
        <script src="../js/sp.js"></script>
        <script src="../js/extra.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
