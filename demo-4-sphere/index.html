<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Demo 4 - Real-time Sphere Visualization - OpenFace</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">OpenFace</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Demos <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../demo-1-web/">Demo 1 - Real-time Web</a>
</li>

                        
                            
<li >
    <a href="../demo-2-comparison/">Demo 2 - Comparison</a>
</li>

                        
                            
<li >
    <a href="../demo-3-classifier/">Demo 3 - Training a Classifier</a>
</li>

                        
                            
<li class="active">
    <a href="./">Demo 4 - Real-time Sphere Visualization</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../usage/">Usage and API Docs</a>
</li>

                        
                            
<li >
    <a href="../setup/">Setup</a>
</li>

                        
                            
<li >
    <a href="../faq/">FAQ</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">DNN Models <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../models-and-accuracies/">Models and Accuracies</a>
</li>

                        
                            
<li >
    <a href="../training-new-models/">Training a DNN Model</a>
</li>

                        
                            
<li >
    <a href="../visualizations/">Visualizations</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../release-notes/">Release Notes</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../demo-3-classifier/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../usage/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/cmusatyalab/openface">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#demo-4-real-time-face-embedding-visualization">Demo 4: Real-Time Face Embedding Visualization</a></li>
        
            <li><a href="#how-this-is-implemented">How this is implemented</a></li>
        
            <li><a href="#running-on-your-computer">Running on your computer</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="demo-4-real-time-face-embedding-visualization">Demo 4: Real-Time Face Embedding Visualization</h2>
<p>Released by <a href="http://bamos.github.io">Brandon Amos</a> and
<a href="https://github.com/gabrfarina">Gabriel Farina</a> on 2016-09-15.</p>
<hr />
<p>We had a great opportunity
(<em>thanks to Jan Harkes, Alison Langmead, and Aaron Henderson</em>)
to present a short OpenFace demo
in the <a href="https://uag.pitt.edu/Detail/occurrences/370">Data (after)Lives art exhibit</a>
at the University of Pittsburgh,
which investigates the relationship between the human notions of self and
technical alternative, externalized, and malleable representations of identity.
The following video is just a quick example, and a real-time version
is being shown live from Sept 8, 2016 to Oct 14, 2016.
We have released the source code behind this demo in our main
GitHub repository in
<a href="https://github.com/cmusatyalab/openface/blob/master/demos/sphere.py">demos/sphere.py</a>.
This exhibit also features <a href="https://raw.githubusercontent.com/cmusatyalab/openface/master/images/sphere-demo/exhibits-nosenzo.png">two other art pieces</a>
by <a href="http://www.pitt.edu/~san76/">Sam Nosenzo</a>,
<a href="http://www.haa.pitt.edu/person/alison-langmead/">Alison Langmead</a>,
and <a href="http://www.aaronhenderson.com/">Aaron Henderson</a> that use OpenFace.</p>
<p><img alt="" src="https://raw.githubusercontent.com/cmusatyalab/openface/master/images/sphere-demo/demo.gif" /></p>
<p><center>
<img alt="" src="https://raw.githubusercontent.com/cmusatyalab/openface/master/images/sphere-demo/exhibit-amos.png" />
</center></p>
<h3 id="how-this-is-implemented">How this is implemented</h3>
<p>This is a short description of our implementation in
<a href="https://github.com/cmusatyalab/openface/blob/master/demos/sphere.py">demos/sphere.py</a>,
which is only ~300 lines of code.</p>
<p>For a brief intro to OpenFace, we provide face recognition with
a deep neural network that embed faces on a sphere.
(See <a href="http://reports-archive.adm.cs.cmu.edu/anon/2016/CMU-CS-16-118.pdf">our tech report</a>
for a more detailed intro to how OpenFace works.)
Faces are often embedded onto a 128-dimensional sphere.
For this demo, we re-trained a neural network to embed faces onto a
3-dimensional sphere that we show in real-time on top of a camera feed.
The 3-dimensional embedding doesn't have the same accuracy as the
128-dimensional embedding, but it's sufficient to illustrate how
the embedding space distinguishes between different people.</p>
<p>In this demo:</p>
<ul>
<li>We first use <a href="http://opencv.org/">OpenCV</a> to get, process, and display
  a video feed from the camera.</li>
<li>The detected faces and embeddings for every face can be easily obtained with
  <a href="http://blog.dlib.net/">dlib</a> and OpenFace with
  <a href="http://cmusatyalab.github.io/openface/usage/">a few lines of code</a>.</li>
<li>The color of the embedding is created by mapping the location of the
  face in the frame to be a number between 0 and 1 and then using
  a <a href="http://matplotlib.org/examples/color/colormaps_reference.html">matplotlib colormap</a>.</li>
<li>To keep all of the graphics on a single panel, we draw the sphere on
  top of the same OpenCV buffer as the video.
  <a href="http://docs.opencv.org/2.4/modules/core/doc/drawing_functions.html">OpenCV only has 2D drawing primitives</a>,
  so we <a href="https://en.wikipedia.org/wiki/Isometric_projection">isometrically project</a>
  the points from the 3D sphere into 2D so we can use OpenCV's 2D drawing primitives.</li>
<li>Since the images from the video are noisy, the embeddings will jump around
  a lot of the sphere if not dampened.
  We smooth this out with
  <a href="http://blog.dlib.net/2015/02/dlib-1813-released.html">dlib's object tracker</a>
  to track of a face's average (dampened) embedding throughout
  the video frames.</li>
<li>Face detection and recognition cause the 'low' frame rate.
  The frame rate could be improved by only doing detection and recognition
  every few frames and using face tracking (which is fast) in between to
  update the face locations.</li>
</ul>
<h3 id="running-on-your-computer">Running on your computer</h3>
<p>To run this on your computer:</p>
<ol>
<li><a href="http://cmusatyalab.github.io/openface/setup/">Set up OpenFace</a>.</li>
<li>Download the 3D model from
   <a href="http://openface-models.storage.cmusatyalab.org/nn4.small2.3d.v1.t7">here</a>.</li>
<li>Run <a href="https://github.com/cmusatyalab/openface/blob/master/demos/sphere.py">demos/sphere.py</a>
   with the <code>--networkModel</code> argument pointing to the 3D model.</li>
</ol></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
                <p>Crafted by <a href="http://bamos.github.io">Brandon Amos</a> at Carnegie Mellon University.</p>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>
        <script src="../js/sp.js"></script>
        <script src="../js/extra.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
